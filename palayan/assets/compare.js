"use strict";function compare_toggle_details(cmp){cmp.addEventListener('click',function(evt){var el=evt.target;while((el=el.parentElement)&&el.nodeName.toLowerCase()!='tr');if(!el.id)el=el.previousElementSibling;if(el.id==window.location.hash.substr(1)){window.location.hash='';}
else
{window.location.hash=el.id;}});}
function compare_append_ext_col(cmp){var rows=cmp.querySelectorAll('tr');var ccnt=rows[0].children.length;if(ccnt<6){var td=document.createElement('td');rows[0].appendChild(td);for(var i=1,l=rows.length;i<l;i++){td=document.createElement('td');if(i&1)td.appendChild(document.createElement('span'));rows[i].appendChild(td);}}}
function compare_hide_x_ifonly2(cmp){var row=cmp.querySelector('tr:first-of-type');var cnt=row.children.length;if(cnt<5){row.children[1].children[0].style.display='none';row.children[2].children[0].style.display='none';}}
function compare_change_city(cmp){var frm=document.getElementById('update-location-form');var row=cmp.querySelector('tr:first-of-type');var inp=frm.querySelector('input');var FRM_OW=frm.offsetWidth;frm.style.display='none';frm.style.visibility='visible';inp.addEventListener('blur',function(evt){frm.style.display='none';setTimeout(function(){},200);});row.addEventListener('click',function(evt){if(evt.target.nodeName.toLowerCase()=='em'){evt.preventDefault();evt.stopPropagation();var p='';for(var n=1,i=1,l=row.children.length-2;l;i++,l--){if(evt.target.parentElement.cellIndex!=i){p+=('&place'+n++)+'='+encodeURIComponent(row.children[i].title);}}
window.location=window.location.pathname+'?'+p.substr(1);}
else if(evt.target.textContent==''){evt.preventDefault();evt.stopPropagation();frm.place_ndx=evt.target.cellIndex;mac.clear_options();inp.value='';var left=(cmp.offsetLeft+cmp.offsetWidth-FRM_OW);if(left>screen.availWidth-FRM_OW)left=screen.availWidth-FRM_OW;frm.style.left=left+'px';frm.style.top=(cmp.offsetTop+evt.target.offsetTop+35)+'px';frm.style.display='block';inp.focus();}});function replace_qp(param,value){var regex=new RegExp("([?;&])"+param+"[^&;]*[;&]?");var query=window.location.search.replace(regex,"$1").replace(/&$/,'');return(query.length>2?query+"&":"?")+(value?param+"="+value:'');}
var src=city_compare_source();var mac=autocomplete(inp,frm.querySelector('ul'),src,function fmt(itm){return'%s, %s'.spf(itm.city,itm.state_abbr);},function sel(n){if(n>-1){var obj=src.row(n);inp.value='%s, %s'.spf(obj.city,obj.state_abbr);var s=replace_qp('place'+frm.place_ndx,encodeURIComponent(inp.value));window.location=window.location.pathname+s;}});frm.addEventListener('submit',function(evt){evt.preventDefault();});}
doc_ready(function(){city_compare_search();var cmp=document.querySelector('.compare-results');if(cmp){compare_toggle_details(cmp);compare_append_ext_col(cmp);compare_hide_x_ifonly2(cmp);compare_change_city(cmp);}
zw_form('rlt');});