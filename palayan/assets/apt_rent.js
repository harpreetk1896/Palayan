"use strict";function aff_zw_form(which,fnc_submit){var sizes=null;var ext_uri=$('#form_zw_'+which+' .aff-ext-uri');var place=$('#aff-'+which+'-place').val();if(which=='rlt'){sizes=[0,50000,100000,200000,300000,400000,500000,600000,700000,800000,900000,1000000,2000000,5000000,10000000,20000000,50000000];ext_uri.text('See more homes in '+place)
place=place.replace(', ','-').replace(' ','-').toLowerCase();ext_uri.attr('href','9EEAi^^HHH]K:==@H]4@>'.r47()+'/homes/for_sale/%s/?utm_source=AreaVibes&utm_medium=referral&utm_campaign=listing_realestate&cbpartner=AreaVibes'.spf(place));ext_uri.attr('target','_blank');}
else{sizes=[0,200,400,600,800,1000,1200,1400,1600,1800,2000,2250,2500,2750,3000,5000,10000,50000];ext_uri.text('See more rentals in '+place)
place=place.replace(', ','-').replace(' ','-').toLowerCase();ext_uri.attr('href','9EEAi^^HHH]K:==@H]4@>'.r47()+'/homes/for_rent/%s/?utm_source=AreaVibes&utm_medium=referral&utm_campaign=listing_rentals&cbpartner=AreaVibes'.spf(place));ext_uri.attr('target','_blank');}
var price_var=$('#aff-'+which+'-prices');var price_slider=$('#aff-'+which+'-price-slider');var price_range=price_slider.parent().parent().find('small');price_slider.slider({range:true,min:0,max:sizes.length-1,step:1,values:[0,sizes.length],slide:function(event,ui){var r1=sizes[ui.values[0]];var r2=sizes[ui.values[1]];price_range.text('$%s - $%s'.spf(commas(r1),commas(r2)));price_var.val('%s %s'.spf(r1,r2));}});var r1=sizes[price_slider.slider('values',0)];var r2=sizes[price_slider.slider('values',1)];price_range.text('$%s - $%s'.spf(commas(r1),commas(r2)));price_var.val('%s %s'.spf(r1,r2));$('#form_zw_'+which).on('submit',function(evt){fnc_submit();evt.preventDefault();});}
function aff_zw_boxes(which,limit){var con=$('#aff_box_'+which);var params={place:$('#aff-'+which+'-place').val(),cid:$('#aff-'+which+'-cid').val(),hid:$('#aff-'+which+'-hid').val()};params.limit=limit;$.ajax({type:'get',dataType:'json',url:'/ax_zw_'+which+'_feed/',data:params}).done(function(res){if(!res)return;var n=res.length;if(n){con.children().remove();for(var i=0;i<n;i+=1){var p=render_one(res[i]);con.append(p);}
con.find('a').prop('target','zw');con.fadeIn();}});con.on('click','.boxx',function(){window.open($(this).data('href'),'blankaffbox');});var mask_outer='<div class="boxx" style="background-image:url(%s)" data-href="%s">%s</div>';var mask_inner='<div></div><span class="cost">$%s</span><span class="addr">%s</span><span class="spec">%s</span>';var render_one=function(itm){var det=[],tmp;tmp=Math.floor(itm.bedrooms*10)/10;if(tmp>0)det.push(tmp+' Bdrm');tmp=Math.floor(itm.bathrooms*10)/10;if(tmp>0)det.push(tmp+' Bath');tmp=Math.floor(itm.fin_sqft*10)/10;if(tmp>0)det.push(tmp+' SqFt');det=det.join(' | ');if(itm.uri.indexOf('?')==-1){itm.uri+='?';}
else{itm.uri+='&';}
if(which=='rlt'){itm.uri+='utm_source=AreaVibes&utm_medium=referral&utm_campaign=listing_realestate&cbpartner=AreaVibes';}
else if(which=='rnt'){itm.uri+='utm_source=AreaVibes&utm_medium=referral&utm_campaign=listing_rentals&cbpartner=AreaVibes';}
else{return'';}
var price=commas(Math.round(itm.price));var out=mask_inner.spf(price,itm.address||'(no address)',det||'(no details)');out=mask_outer.spf(itm.bld_photo,itm.uri,out);return out;};}
function setup_aff_system(params){var make_params=function(which){var ext='',gou='';if(which=='rlt'){ext='9EEAi^^HHH]K:==@H]4@>^9@>6D^7@C0D2=6^TD^TD\\0365D^TD\\032E9D^T5\\T50AC:46^';gou='utm_source=AreaVibes&utm_medium=referral&utm_campaign=searchwidget&cbpartner=AreaVibes';}
else if(which=='rnt'){ext='9EEAi^^HHH]K:==@H]4@>^9@>6D^7@C0C6?E^TD^TD\\0365D^TD\\032E9D^TD\\TD0>A^';gou='utm_source=AreaVibes&utm_medium=referral&utm_campaign=searchwidget_rentals&cbpartner=AreaVibes';}
return{ext:ext.r47(),gou:'?'+gou,place:$('#aff-'+which+'-place').val().replace(', ','-').replace(' ','-'),prices:$('#aff-'+which+'-prices').val().split(' '),bed:$('#aff-'+which+'-bed').val(),bath:$('#aff-'+which+'-bath').val(),cid:$('#aff-'+which+'-cid').val(),hid:$('#aff-'+which+'-hid').val()};};params=params||{'rnt':8,'rlt':8};if(params.rlt){aff_zw_form('rlt',function(){var p=make_params('rlt');var u=p.ext.spf(p.place,p.bed,p.bath,p.prices[0],p.prices[1])+p.gou;window.open(u,'blankaff');});aff_zw_boxes('rlt',params.rlt);}
if(params.rnt){aff_zw_form('rnt',function(){var p=make_params('rnt');var u=p.ext.spf(p.place,p.bed,p.bath,p.prices[0],p.prices[1])+p.gou;window.open(u,'blankaff');});aff_zw_boxes('rnt',params.rnt);}}
doc_ready(function(){setup_aff_system({'rnt':25});});